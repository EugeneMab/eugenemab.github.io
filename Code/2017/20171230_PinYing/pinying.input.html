<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script src="pinying.ime.js">
</script>
<script>
var mapTripletToGlyph = {};
function convert() {
	var src = document.getElementById("src").value;
	var tgt = "";
	var lines = src.split('\n');
	for (var row = 0; row < lines.length; row++) {
		var items = lines[row].split(' ');
		for (var pos = 0; pos < items.length; pos++) {
			var item = items[pos];
			var mapped = mapTripletToGlyph[item.toLowerCase()];
			if (!mapped) {
				tgt += ' ' + item;
				continue;
			}
			tgt += mapped;
		}
		tgt += '\n';
	}
	document.getElementById("tgt").innerHTML = tgt;
}
function init() {
	for (var glyph in map) {
		if (!map.hasOwnProperty(glyph)) {
			continue;
		}
		mapTripletToGlyph[map[glyph][0].toLowerCase()] = glyph;
	}
	convert();
	var srcElem = document.getElementById("src");
	if (srcElem.addEventListener) {
		srcElem.addEventListener("input", function() { convert(); }, false);
	} else if (srcElem.attachEvent) {
		srcElem.attachEvent("onpropertychange", function() { convert(); });
	}
}
</script>
<body style="font-family: Courier; font-size: 24px;" onload="init()">
<textarea id="src" cols="180" rows="25" style="font-family: 宋体, SimSun, Courier; font-size: 24px;">

PIN.spell YING.brave ： YI.single ZHONG.breed HAN.dynasty ZI.symbol LA.drag DING.stem HUA.ize FANG.quadrilateral AN.incident 

wo.me ni.you ta.he ta.she ta.it 

</textarea>
<br/>
<textarea id="tgt" cols="180" rows="25" style="font-family: 宋体, SimSun, Courier; font-size: 24px;">


</textarea>
</body>
</html>
